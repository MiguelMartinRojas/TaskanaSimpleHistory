language: java
jdk:
  - oraclejdk8

stages:
  - Build
  - Release

env:
  global:
    - DEPLOY_REPO=Taskana/TaskanaSimpleHistory
    - VERSION=v0.0.8-SNAPSHOT
  
jobs:
  include:
    - stage: Build
      script:
        - mvn clean install -q -f lib -Dmaven.javadoc.skip=true
    - stage: Release
      script:
        - ci/release.sh lib/taskana-simplehistory-provider ${VERSION}
          && ci/release.sh lib/taskana-simplehistory-rest-spring ${VERSION}